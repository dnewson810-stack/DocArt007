<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DocArtAtlier</title>
    <!-- React and ReactDOM from CDN -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <!-- Tailwind CSS from CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts for graffiti style -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Permanent+Marker&display=swap" rel="stylesheet">
    <script>
      // Configure Tailwind to use JIT mode for faster compilation
      tailwind.config = {
        theme: {
          extend: {
            fontFamily: {
              sans: ['Inter', 'sans-serif'],
              graffiti: ['Permanent Marker', 'cursive']
            },
          },
        }
      }
    </script>
    <!-- Lucide React icons, converted to a self-contained script -->
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
</head>
<body class="bg-sky-200 antialiased font-sans">
    <div id="root"></div>

    <script type="text/javascript">
        // All of your React code goes here within this script tag
        const { useState, useEffect, createElement: e } = React;
        const { createRoot } = ReactDOM;

        // Helper function for creating elements with class names
        const c = (type, props, ...children) => e(type, props, ...children);

        // Convert Lucide icons to React components
        const lucideIcons = lucide.icons;
        const BookA = () => c('span', { dangerouslySetInnerHTML: { __html: lucide.createIcons.BookA } });
        const Laugh = () => c('span', { dangerouslySetInnerHTML: { __html: lucide.createIcons.Laugh } });
        const Book = () => c('span', { dangerouslySetInnerHTML: { __html: lucide.createIcons.Book } });
        const Gamepad = () => c('span', { dangerouslySetInnerHTML: { __html: lucide.createIcons.Gamepad } });
        const Handshake = () => c('span', { dangerouslySetInnerHTML: { __html: lucide.createIcons.Handshake } });
        const icons = { BookA, Laugh, Book, Gamepad, Handshake };

        // --- Data for the app ---
        const bibleVerses = [
            { text: "For God so loved the world, that he gave his only Son, that whoever believes in him should not perish but have eternal life.", citation: "John 3:16" },
            { text: "The Lord is my shepherd; I shall not want.", citation: "Psalm 23:1" },
            { text: "I can do all things through him who strengthens me.", citation: "Philippians 4:13" },
            { text: "In the beginning was the Word, and the Word was with God, and the Word was God.", citation: "John 1:1" },
            { text: "The steadfast love of the Lord never ceases; his mercies never come to an end; they are new every morning; great is your faithfulness.", citation: "Lamentations 3:22-23" },
            { text: "Trust in the Lord with all your heart, and do not lean on your own understanding.", citation: "Proverbs 3:5" },
            { text: "So do not fear, for I am with you; do not be dismayed, for I am your God. I will strengthen you and help you; I will uphold you with my righteous right hand.", citation: "Isaiah 41:10" },
            { text: "But the fruit of the Spirit is love, joy, peace, patience, kindness, goodness, faithfulness, gentleness, self-control; against such things there is no law.", citation: "Galatians 5:22-23" },
            { text: "For where two or three are gathered in my name, there am I among them.", citation: "Matthew 18:20" },
            { text: "And we know that in all things God works for the good of those who love him, who have been called according to his purpose.", citation: "Romans 8:28" },
            { text: "I have stored up your word in my heart, that I might not sin against you.", citation: "Psalm 119:11" },
            { text: "Come to me, all who labor and are heavy laden, and I will give you rest.", citation: "Matthew 11:28" },
            { text: "Therefore, if anyone is in Christ, he is a new creation. The old has passed away; behold, the new has come.", citation: "2 Corinthians 5:17" },
            { text: "Be kind to one another, tenderhearted, forgiving one another, as God in Christ forgave you.", citation: "Ephesians 4:32" },
            { text: "Casting all your anxieties on him, because he cares for you.", citation: "1 Peter 5:7" },
        ];
        
        const dadJokes = [
            "I'm afraid for the calendar. Its days are numbered.",
            "What do you call a fake noodle? An Impasta.",
            "I would tell you a joke about an apple, but it's not a very good one.",
            "Why don't scientists trust atoms? Because they make up everything!",
            "I'm reading a book on anti-gravity. It's impossible to put down!",
            "Did you hear about the restaurant on the moon? Great food, no atmosphere.",
            "Why did the scarecrow win an award? Because he was outstanding in his field!",
            "I'm on a seafood diet. I see food, and I eat it.",
            "What do you call a belt made of watches? A waist of time.",
            "What do you get when you cross a snowman and a vampire? Frostbite.",
            "Why don't skeletons fight each other? They don't have the guts.",
            "Parallel lines have so much in common. Itâ€™s a shame theyâ€™ll never meet.",
            "My wife asked me to stop singing 'Wonderwall' by Oasis. I said maybe.",
            "Why was the math book sad? Because it had too many problems.",
            "I told my wife she should embrace her mistakes. She gave me a hug.",
        ];

        const ebooks = [
            {
                id: 1,
                title: "Detroit Sentinels",
                description: "A fictional story infused with biblical truth. We hope you enjoy and also received spiritual wisdom.",
                price: "Free",
                // Use a relative path, which is better for local testing
                downloadUrl: "./DetroitSentinelsComplete.pdf"
            },
        ];

        // --- Chess Game Logic ---
        const initialBoard = [
            ['r', 'n', 'b', 'q', 'k', 'b', 'n', 'r'],
            ['p', 'p', 'p', 'p', 'p', 'p', 'p', 'p'],
            [null, null, null, null, null, null, null, null],
            [null, null, null, null, null, null, null, null],
            [null, null, null, null, null, null, null, null],
            [null, null, null, null, null, null, null, null],
            ['P', 'P', 'P', 'P', 'P', 'P', 'P', 'P'],
            ['R', 'N', 'B', 'Q', 'K', 'B', 'N', 'R']
        ];

        const PIECES = {
            'R': 'â™œ', 'N': 'â™ž', 'B': 'â™', 'Q': 'â™›', 'K': 'â™š', 'P': 'â™Ÿ',
            'r': 'â™–', 'n': 'â™˜', 'b': 'â™—', 'q': 'â™•', 'k': 'â™”', 'p': 'â™™'
        };

        const getPieceColor = (piece) => {
            if (!piece) return null;
            return piece.toUpperCase() === piece ? 'white' : 'black';
        };

        const getValidMoves = (board, row, col) => {
            const piece = board[row][col];
            if (!piece) return [];
            const pieceType = piece.toLowerCase();
            const pieceColor = getPieceColor(piece);
            const moves = [];

            const directions = {
                pawn: pieceColor === 'white' ? [{r: -1, c: 0}] : [{r: 1, c: 0}],
                pawnCapture: pieceColor === 'white' ? [{r: -1, c: -1}, {r: -1, c: 1}] : [{r: 1, c: -1}, {r: 1, c: 1}],
                rook: [{r: 1, c: 0}, {r: -1, c: 0}, {r: 0, c: 1}, {r: 0, c: -1}],
                knight: [{r: 2, c: 1}, {r: 2, c: -1}, {r: -2, c: 1}, {r: -2, c: -1}, {r: 1, c: 2}, {r: 1, c: -2}, {r: -1, c: 2}, {r: -1, c: -2}],
                bishop: [{r: 1, c: 1}, {r: 1, c: -1}, {r: -1, c: 1}, {r: -1, c: -1}],
                queen: [{r: 1, c: 0}, {r: -1, c: 0}, {r: 0, c: 1}, {r: 0, c: -1}, {r: 1, c: 1}, {r: 1, c: -1}, {r: -1, c: 1}, {r: -1, c: -1}],
                king: [{r: 1, c: 0}, {r: -1, c: 0}, {r: 0, c: 1}, {r: 0, c: -1}, {r: 1, c: 1}, {r: 1, c: -1}, {r: -1, c: 1}, {r: -1, c: -1}]
            };

            const checkAndAddMove = (newRow, newCol) => {
                if (newRow >= 0 && newRow < 8 && newCol >= 0 && newCol < 8) {
                    const targetPiece = board[newRow][newCol];
                    if (!targetPiece || getPieceColor(targetPiece) !== pieceColor) {
                        moves.push({ row: newRow, col: newCol });
                    }
                }
            };
            
            switch (pieceType) {
                case 'p':
                    // Single move
                    let singleMoveRow = row + directions.pawn[0].r;
                    if (singleMoveRow >= 0 && singleMoveRow < 8 && !board[singleMoveRow][col]) {
                        checkAndAddMove(singleMoveRow, col);
                        // Double move
                        let startRow = pieceColor === 'white' ? 6 : 1;
                        if (row === startRow) {
                            let doubleMoveRow = row + directions.pawn[0].r * 2;
                            if (!board[doubleMoveRow][col]) {
                                checkAndAddMove(doubleMoveRow, col);
                            }
                        }
                    }
                    // Captures
                    directions.pawnCapture.forEach(dir => {
                        let newRow = row + dir.r;
                        let newCol = col + dir.c;
                        if (newRow >= 0 && newRow < 8 && newCol >= 0 && newCol < 8) {
                            const targetPiece = board[newRow][newCol];
                            if (targetPiece && getPieceColor(targetPiece) !== pieceColor) {
                                moves.push({ row: newRow, col: newCol });
                            }
                        }
                    });
                    break;
                case 'r':
                case 'b':
                case 'q':
                    const pieceDirs = directions[pieceType === 'r' ? 'rook' : (pieceType === 'b' ? 'bishop' : 'queen')];
                    pieceDirs.forEach(dir => {
                        for (let i = 1; i < 8; i++) {
                            const newRow = row + dir.r * i;
                            const newCol = col + dir.c * i;
                            if (newRow >= 0 && newCol >= 0 && newRow < 8 && newCol < 8) {
                                const targetPiece = board[newRow][newCol];
                                if (targetPiece) {
                                    if (getPieceColor(targetPiece) !== pieceColor) {
                                        moves.push({ row: newRow, col: newCol });
                                    }
                                    break; // Stop at first piece
                                } else {
                                    moves.push({ row: newRow, col: newCol });
                                }
                            } else {
                                break;
                            }
                        }
                    });
                    break;
                case 'n':
                case 'k':
                    directions[pieceType === 'n' ? 'knight' : 'king'].forEach(dir => {
                        checkAndAddMove(row + dir.r, col + dir.c);
                    });
                    break;
            }
            return moves;
        };

        const isKingCaptured = (board, color) => {
            const opponentKing = color === 'white' ? 'k' : 'K';
            return board.flat().includes(opponentKing);
        };
        
        // --- Spades Game Logic ---
        const suits = ['spades', 'hearts', 'diamonds', 'clubs'];
        const values = ['2', '3', '4', '5', '6', '7', '8', '9', '10', 'J', 'Q', 'K', 'A'];

        const createDeck = () => {
            let deck = [];
            for (let suit of suits) {
                for (let value of values) {
                    deck.push({ suit, value });
                }
            }
            return deck;
        };

        const shuffleDeck = (deck) => {
            for (let i = deck.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [deck[i], deck[j]] = [deck[j], deck[i]];
            }
            return deck;
        };
        
        const cardStrength = (card) => {
            const suitRank = { 'clubs': 1, 'diamonds': 2, 'hearts': 3, 'spades': 4 };
            const valueRank = { '2': 2, '3': 3, '4': 4, '5': 5, '6': 6, '7': 7, '8': 8, '9': 9, '10': 10, 'J': 11, 'Q': 12, 'K': 13, 'A': 14 };
            return {
                suit: suitRank[card.suit],
                value: valueRank[card.value]
            };
        };

        const determineWinner = (trick, trumpSuit) => {
            if (trick.length === 0) return null;

            let highestCard = trick[0].card;
            let winningPlayerIndex = trick[0].playerIndex;
            let currentSuit = highestCard.suit;

            // First, find the highest card of the suit that was led
            for (let i = 1; i < trick.length; i++) {
                const { card, playerIndex } = trick[i];
                if (card.suit === currentSuit && cardStrength(card).value > cardStrength(highestCard).value) {
                    highestCard = card;
                    winningPlayerIndex = playerIndex;
                }
            }

            // Then, check for any trumps (spades)
            let highestTrump = null;
            let trumpWinnerIndex = null;
            for (let i = 0; i < trick.length; i++) {
                const { card, playerIndex } = trick[i];
                if (card.suit === 'spades') {
                    if (!highestTrump || cardStrength(card).value > cardStrength(highestTrump).value) {
                        highestTrump = card;
                        trumpWinnerIndex = playerIndex;
                    }
                }
            }
            
            if (highestTrump) {
                return trumpWinnerIndex;
            }
            
            return winningPlayerIndex;
        };
        
        const isValidSpadesMove = (hand, card, leadSuit) => {
            if (card.suit === leadSuit) {
                return true;
            }
            // If the player doesn't have the lead suit, they can play any card.
            if (!hand.some(c => c.suit === leadSuit)) {
                return true;
            }
            return false;
        };

        // --- Main App Component ---
        const App = () => {
            const [currentVerse, setCurrentVerse] = useState(bibleVerses[0]);
            const [currentJoke, setCurrentJoke] = useState(dadJokes[0]);
            const [currentPage, setCurrentPage] = useState('home');
            const [messageBox, setMessageBox] = useState({ visible: false, text: '' });
            const [currentGame, setCurrentGame] = useState('menu');
            
            // Chess State
            const [chessBoard, setChessBoard] = useState(JSON.parse(JSON.stringify(initialBoard)));
            const [selectedPiece, setSelectedPiece] = useState(null);
            const [chessMessage, setChessMessage] = useState('White to move.');
            const [turn, setTurn] = useState('white');
            const [isGameOver, setIsGameOver] = useState(false);
            
            // Spades Game State
            const [spadesState, setSpadesState] = useState({
                players: [],
                hands: [[]],
                bids: [],
                tricksWon: [],
                trick: [],
                scores: [0, 0],
                bags: [0, 0],
                leadSuit: null,
                playerTurn: 0,
                phase: 'bidding',
                message: "Place your bid.",
                round: 1
            });

            useEffect(() => {
                if (turn === 'black' && !isGameOver) {
                    setTimeout(makeComputerMove, 1000);
                }
            }, [turn, isGameOver]);

            useEffect(() => {
                if (spadesState.phase === 'playing' && spadesState.playerTurn !== 0) {
                    setTimeout(() => makeSpadesAIMove(), 1000);
                }
            }, [spadesState.phase, spadesState.playerTurn]);

            const showMessageBox = (text) => {
                setMessageBox({ visible: true, text });
            };

            const getRandomVerse = () => {
                const randomIndex = Math.floor(Math.random() * bibleVerses.length);
                setCurrentVerse(bibleVerses[randomIndex]);
            };
            
            const getRandomJoke = () => {
                const randomIndex = Math.floor(Math.random() * dadJokes.length);
                setCurrentJoke(dadJokes[randomIndex]);
            };

            // --- Chess Logic ---
            const makeComputerMove = () => {
                const blackPieces = [];
                for (let r = 0; r < 8; r++) {
                    for (let c = 0; c < 8; c++) {
                        const piece = chessBoard[r][c];
                        if (piece && getPieceColor(piece) === 'black') {
                            blackPieces.push({ piece, row: r, col: c });
                        }
                    }
                }
                
                let possibleMoves = [];
                blackPieces.forEach(p => {
                    const validMoves = getValidMoves(chessBoard, p.row, p.col);
                    validMoves.forEach(move => {
                        possibleMoves.push({ from: {row: p.row, col: p.col}, to: move });
                    });
                });
                
                if (possibleMoves.length > 0) {
                    const randomMove = possibleMoves[Math.floor(Math.random() * possibleMoves.length)];
                    const newBoard = JSON.parse(JSON.stringify(chessBoard));
                    
                    const movedPiece = newBoard[randomMove.from.row][randomMove.from.col];
                    newBoard[randomMove.to.row][randomMove.to.col] = movedPiece;
                    newBoard[randomMove.from.row][randomMove.from.col] = null;

                    if (isKingCaptured(newBoard, 'white')) {
                        setChessMessage('Black wins! The King has been captured.');
                        setIsGameOver(true);
                    } else {
                        setChessMessage('White to move.');
                        setTurn('white');
                    }
                    setChessBoard(newBoard);
                } else {
                    setChessMessage("Stalemate! Black can't move.");
                    setIsGameOver(true);
                }
            };

            const handleChessClick = (row, col) => {
                if (isGameOver || turn === 'black') return;

                if (!selectedPiece) {
                    const piece = chessBoard[row][col];
                    if (piece && getPieceColor(piece) === turn) {
                        setSelectedPiece({ row, col });
                    }
                } else {
                    const fromRow = selectedPiece.row;
                    const fromCol = selectedPiece.col;
                    const newBoard = JSON.parse(JSON.stringify(chessBoard));
                    const pieceToMove = newBoard[fromRow][fromCol];
                    
                    const validMoves = getValidMoves(chessBoard, fromRow, fromCol);
                    const isMoveValid = validMoves.some(move => move.row === row && move.col === col);
                    
                    if (isMoveValid) {
                        newBoard[row][col] = pieceToMove;
                        newBoard[fromRow][fromCol] = null;
                        
                        if (isKingCaptured(newBoard, 'black')) {
                            setChessMessage('White wins! The King has been captured.');
                            setIsGameOver(true);
                        } else {
                            setChessMessage('Black is thinking...');
                            setTurn('black');
                        }
                        setChessBoard(newBoard);
                    } else {
                        showMessageBox("Invalid move.");
                    }
                    setSelectedPiece(null);
                }
            };
            
            const resetChessGame = () => {
                setChessBoard(JSON.parse(JSON.stringify(initialBoard)));
                setSelectedPiece(null);
                setChessMessage('White to move.');
                setTurn('white');
                setIsGameOver(false);
            };

            // --- Spades Logic ---
            const startNewSpadesGame = () => {
                const deck = shuffleDeck(createDeck());
                const hands = [[], [], [], []];
                for (let i = 0; i < 52; i++) {
                    hands[i % 4].push(deck[i]);
                }
                
                setSpadesState({
                    players: ['You', 'Computer 1', 'Computer 2', 'Computer 3'],
                    hands,
                    bids: [0, 0, 0, 0],
                    tricksWon: [0, 0, 0, 0],
                    trick: [],
                    scores: [0, 0],
                    bags: [0, 0],
                    leadSuit: null,
                    playerTurn: 0,
                    phase: 'bidding',
                    message: "Place your bid.",
                    round: 1
                });
            };

            const handleSpadesBid = (bid) => {
                const newBids = [...spadesState.bids];
                newBids[0] = bid;
                setSpadesState(prev => ({
                    ...prev,
                    bids: newBids,
                    message: "Bids are in. Game starts!",
                    phase: 'playing',
                    playerTurn: 0 // Player always goes first
                }));
            };

            const calculateScores = () => {
                const { bids, tricksWon, scores, bags } = spadesState;
                const newScores = [...scores];
                const newBags = [...bags];
                
                // Calculate team 1 (player and computer 2)
                const team1Bid = bids[0] + bids[2];
                const team1Tricks = tricksWon[0] + tricksWon[2];
                if (team1Tricks >= team1Bid) {
                    newScores[0] += team1Bid * 10;
                    newBags[0] += team1Tricks - team1Bid;
                } else {
                    newScores[0] -= team1Bid * 10;
                }

                // Calculate team 2 (computer 1 and computer 3)
                const team2Bid = bids[1] + bids[3];
                const team2Tricks = tricksWon[1] + tricksWon[3];
                if (team2Tricks >= team2Bid) {
                    newScores[1] += team2Bid * 10;
                    newBags[1] += team2Tricks - team2Bid;
                } else {
                    newScores[1] -= team2Bid * 10;
                }

                // Check for bag penalties
                if (newBags[0] >= 10) {
                    newScores[0] -= 100;
                    newBags[0] -= 10;
                }
                if (newBags[1] >= 10) {
                    newScores[1] -= 100;
                    newBags[1] -= 10;
                }

                setSpadesState(prev => ({
                    ...prev,
                    scores: newScores,
                    bags: newBags,
                    round: prev.round + 1,
                    message: `Round ${prev.round} over. Scores updated. Starting next round...`,
                    phase: 'bidding'
                }));
                setTimeout(startNewSpadesGame, 2000);
            };

            const handleSpadesPlayerMove = (card) => {
                if (spadesState.playerTurn !== 0 || isGameOver) return;
                
                const currentHand = spadesState.hands[0];
                if (!isValidSpadesMove(currentHand, card, spadesState.leadSuit)) {
                    showMessageBox("You must follow suit if you can!");
                    return;
                }

                const newHands = [...spadesState.hands];
                const cardIndex = newHands[0].findIndex(c => c.suit === card.suit && c.value === card.value);
                newHands[0].splice(cardIndex, 1);
                
                const newTrick = [...spadesState.trick, { card, playerIndex: 0 }];
                
                setSpadesState(prev => ({
                    ...prev,
                    hands: newHands,
                    trick: newTrick,
                    leadSuit: prev.leadSuit || card.suit,
                    playerTurn: (prev.playerTurn + 1) % 4
                }));
            };
            
            const makeSpadesAIMove = () => {
                const currentPlayerIndex = spadesState.playerTurn;
                const currentHand = spadesState.hands[currentPlayerIndex];
                const newTrick = [...spadesState.trick];
                let cardToPlay;
                
                // Simplified AI logic: find a valid card, if none, play first one
                const validCards = currentHand.filter(card => isValidSpadesMove(currentHand, card, spadesState.leadSuit));
                if (validCards.length > 0) {
                     cardToPlay = validCards[0];
                } else {
                    cardToPlay = currentHand[0];
                }

                const newHands = [...spadesState.hands];
                const cardIndex = newHands[currentPlayerIndex].findIndex(c => c.suit === cardToPlay.suit && c.value === cardToPlay.value);
                newHands[currentPlayerIndex].splice(cardIndex, 1);
                newTrick.push({ card: cardToPlay, playerIndex: currentPlayerIndex });

                setSpadesState(prev => ({
                    ...prev,
                    hands: newHands,
                    trick: newTrick,
                    leadSuit: prev.leadSuit || cardToPlay.suit,
                    playerTurn: (prev.playerTurn + 1) % 4
                }));
            };
            
            useEffect(() => {
                if (spadesState.trick.length === 4) {
                    const winner = determineWinner(spadesState.trick, 'spades');
                    const newTricksWon = [...spadesState.tricksWon];
                    newTricksWon[winner]++;
                    
                    if (spadesState.hands.some(hand => hand.length === 0)) {
                        setSpadesState(prev => ({
                            ...prev,
                            tricksWon: newTricksWon,
                            trick: [],
                            leadSuit: null,
                            playerTurn: winner,
                            message: `Round complete! Player ${winner + 1} won this trick.`
                        }));
                        setTimeout(calculateScores, 2000);
                    } else {
                         setSpadesState(prev => ({
                            ...prev,
                            tricksWon: newTricksWon,
                            trick: [],
                            leadSuit: null,
                            playerTurn: winner,
                            message: `Player ${winner + 1} won this trick.`
                        }));
                    }
                }
            }, [spadesState.trick]);

            const renderSpadesBidding = () => {
                const bids = Array.from({ length: 14 }, (_, i) => i); // 0-13
                return c('div', { className: "flex flex-col items-center" },
                    c('h3', { className: "text-xl font-bold mb-4" }, "Place your bid (0-13):"),
                    c('div', { className: "grid grid-cols-7 gap-2 max-w-lg" },
                        bids.map(bid => c('button', {
                            key: bid,
                            onClick: () => handleSpadesBid(bid),
                            className: "p-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700"
                        }, bid))
                    )
                );
            };

            const renderSpadesGame = () => {
                const { players, hands, bids, tricksWon, trick, playerTurn, scores, bags } = spadesState;
                const playerHand = hands[0];
                const isPlayerTurn = playerTurn === 0;

                return c('div', { className: "flex flex-col items-center p-4 space-y-4" },
                    c('button', {
                        onClick: () => setCurrentGame('menu'),
                        className: "absolute top-4 left-4 text-gray-500 hover:text-gray-800 transition-colors"
                    }, 'â† Back'),
                    c('h2', { className: "text-2xl font-bold" }, "Spades"),
                    c('p', { className: "text-lg text-gray-600 mb-4" }, spadesState.message),
                    c('div', { className: "flex justify-center w-full" },
                         c('div', { className: "grid grid-cols-4 gap-4" },
                            trick.map((playedCard, index) => c('div', { key: index, className: "p-2 text-center" },
                                c('div', { className: "text-3xl" }, `
                                    ${playedCard.card.suit === 'spades' ? 'â™ ï¸' : playedCard.card.suit === 'hearts' ? 'â™¥ï¸' : playedCard.card.suit === 'diamonds' ? 'â™¦ï¸' : 'â™£ï¸'}
                                    ${playedCard.card.value}
                                `),
                                c('p', { className: "text-xs mt-1" }, players[playedCard.playerIndex])
                            ))
                        )
                    ),
                    c('div', { className: "text-center my-4" }, `It's ${players[playerTurn]}'s turn.`),
                    c('div', { className: "w-full overflow-x-auto" },
                        c('div', { className: "flex justify-center space-x-2" },
                            playerHand.sort((a,b) => cardStrength(a).suit - cardStrength(b).suit || cardStrength(a).value - cardStrength(b).value).map((card, index) => c('button', {
                                key: `${card.suit}-${card.value}`,
                                onClick: () => handleSpadesPlayerMove(card),
                                disabled: !isPlayerTurn || spadesState.phase !== 'playing',
                                className: `p-2 rounded-lg border-2 shadow-md transition-transform transform ${card.suit === 'hearts' || card.suit === 'diamonds' ? 'text-red-500' : 'text-gray-800'} ${isPlayerTurn && spadesState.phase === 'playing' ? 'hover:scale-110' : ''}`
                            }, c('div', { className: "text-lg font-bold" }, card.value), c('div', { className: "text-xs" }, card.suit)))
                        )
                    ),
                    c('div', { className: "mt-6 w-full max-w-lg bg-gray-100 p-4 rounded-xl shadow-inner" },
                        c('h3', { className: "text-lg font-bold text-center mb-2" }, "Scoreboard"),
                        c('div', { className: "grid grid-cols-2 gap-2 text-center" },
                            c('div', { className: "font-bold text-lg" }, "Team 1 (You & C2)"),
                            c('div', { className: "font-bold text-lg" }, "Team 2 (C1 & C3)"),
                            c('div', null, `Score: ${scores[0]}`),
                            c('div', null, `Score: ${scores[1]}`),
                            c('div', null, `Bags: ${bags[0]}`),
                            c('div', null, `Bags: ${bags[1]}`)
                        )
                    )
                );
            };

            const renderMessageBox = () => {
                if (!messageBox.visible) {
                    return null;
                }
                return c('div', { className: "fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center p-4 z-50" },
                    c('div', { className: "bg-white p-6 rounded-xl shadow-lg text-center max-w-sm w-full" },
                        c('p', { className: "text-gray-800 font-semibold mb-4" }, messageBox.text),
                        c('button', {
                            onClick: () => setMessageBox({ visible: false, text: '' }),
                            className: "bg-indigo-600 text-white font-semibold py-2 px-6 rounded-full shadow-lg hover:bg-indigo-700 transition transform hover:scale-105"
                        }, 'OK')
                    )
                );
            };

            const renderContent = () => {
                switch (currentPage) {
                    case 'home':
                        return c('div', null,
                            c('div', { className: "relative mb-6 text-center text-gray-700" },
                                c('p', { className: "text-lg font-semibold" }, 'Thanks for downloading! ðŸ™'),
                                c('p', { className: "mt-1" },
                                    'Feel free to add me on YouTube and TikTok',
                                    c('br', null),
                                    c('a', { href: "https://www.youtube.com/@docart07", target: "_blank", rel: "noopener noreferrer", className: "text-blue-500 hover:text-blue-700 font-bold" }, '@docart07')
                                )
                            ),
                            c('div', { className: "relative mb-6" },
                                c('img', {
                                    src: "https://placehold.co/400x400/94a3b8/0f172a?text=Docart07",
                                    alt: "User's profile graphic",
                                    className: "w-full rounded-xl shadow-lg border-2 border-gray-200"
                                })
                            ),
                            c('div', { className: "flex flex-col space-y-8" },
                                c('div', { className: "bg-gradient-to-r from-blue-500 to-indigo-600 text-white p-6 rounded-lg shadow-inner" },
                                    c('div', { className: "flex items-center justify-center mb-4" },
                                        c(icons.BookA, { size: 24, className: "mr-2" }),
                                        c('h2', { className: "text-xl font-bold" }, 'Verse of the Day')
                                    ),
                                    c('p', { className: "text-center italic font-light mb-2" }, `"${currentVerse.text}"`),
                                    c('p', { className: "text-right font-semibold text-sm" }, `-- ${currentVerse.citation}`),
                                    c('div', { className: "flex justify-center mt-4" },
                                        c('button', {
                                            onClick: getRandomVerse,
                                            className: "bg-white text-indigo-600 font-semibold py-2 px-4 rounded-full shadow-md transition transform hover:scale-105 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-white"
                                        }, 'New Verse')
                                    )
                                ),
                                c('div', { className: "bg-gradient-to-r from-yellow-400 to-orange-500 text-white p-6 rounded-lg shadow-inner" },
                                    c('div', { className: "flex items-center justify-center mb-4" },
                                        c(icons.Laugh, { size: 24, className: "mr-2" }),
                                        c('h2', { className: "text-xl font-bold" }, 'Dad Joke')
                                    ),
                                    c('p', { className: "text-center font-light mb-2" }, `"${currentJoke}"`),
                                    c('div', { className: "flex justify-center mt-4" },
                                        c('button', {
                                            onClick: getRandomJoke,
                                            className: "bg-white text-orange-500 font-semibold py-2 px-4 rounded-full shadow-md transition transform hover:scale-105 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-white"
                                        }, 'Another Joke')
                                    )
                                )
                            )
                        );
                    case 'ebooks':
                        return c('div', null,
                            c('h2', { className: "text-2xl font-bold text-center text-gray-800 mb-6" }, 'My Ebooks'),
                            c('div', { className: "grid gap-6" },
                                ebooks.map(ebook => c('div', { key: ebook.id, className: "bg-gray-50 p-6 rounded-xl shadow-md border border-gray-200 flex flex-col items-center text-center" },
                                    c(icons.Book, { size: 48, className: "text-indigo-500 mb-3" }),
                                    c('h3', { className: "text-lg font-bold text-gray-900" }, ebook.title),
                                    c('p', { className: "text-sm text-gray-600 mt-1 mb-3" }, ebook.description),
                                    c('span', { className: "text-xl font-bold text-indigo-600 mb-4" }, ebook.price),
                                    // Use an anchor tag for direct download
                                    c('a', {
                                        href: ebook.downloadUrl,
                                        className: "bg-indigo-600 text-white font-semibold py-2 px-6 rounded-full shadow-lg hover:bg-indigo-700 transition transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",
                                        target: "_blank"
                                    }, 'Read Online'),
                                    c('div', { className: "mt-4 text-sm text-gray-700" },
                                        c('p', null, 'Everything is free but if you would like to donate any amount you could do so via'),
                                        c('a', {
                                            href: "https://paypal.me/DenzelNewson93",
                                            target: "_blank",
                                            rel: "noopener noreferrer",
                                            className: "font-bold text-blue-500 hover:text-blue-700 transition-colors"
                                        }, 'PayPal @DenzelNewson93'),
                                        c('p', { className: "mt-1" }, 'God bless.')
                                    )
                                ))
                            ),
                            c('p', { className: "text-center text-xs text-gray-500 mt-6" }, '*This "Read Online" button is for demonstration purposes only.')
                        );
                    case 'game':
                        switch (currentGame) {
                            case 'menu':
                                return c('div', { className: "flex flex-col items-center p-6 space-y-4 text-center" },
                                    c('h2', { className: "text-2xl font-bold text-gray-800" }, 'Select a Game'),
                                    c('div', { className: "flex flex-col space-y-4 w-full" },
                                        c('button', {
                                            onClick: () => {
                                                setCurrentGame('spades');
                                                startNewSpadesGame();
                                            },
                                            className: "bg-gray-600 text-white font-semibold py-3 px-8 rounded-full shadow-lg hover:bg-gray-700 transition transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500"
                                        }, '2D Spades'),
                                        c('button', {
                                            onClick: () => setCurrentGame('chess'),
                                            className: "bg-red-600 text-white font-semibold py-3 px-8 rounded-full shadow-lg hover:bg-red-700 transition transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500"
                                        }, '2D Chess'),
                                    )
                                );
                            case 'chess':
                                return c('div', { className: "flex flex-col items-center p-6 space-y-4 text-center" },
                                    c('button', {
                                        onClick: () => setCurrentGame('menu'),
                                        className: "absolute top-4 left-4 text-gray-500 hover:text-gray-800 transition-colors"
                                    }, 'â† Back'),
                                    c('h2', { className: "text-2xl font-bold text-gray-800" }, '2D Chess Game'),
                                    c('p', { className: `text-lg font-semibold ${isGameOver ? 'text-red-600' : 'text-gray-600'}` }, chessMessage),
                                    c('div', { className: "grid grid-cols-8 grid-rows-8 w-[400px] h-[400px] border-2 border-gray-700 shadow-xl" },
                                        chessBoard.flat().map((piece, index) => {
                                            const row = Math.floor(index / 8);
                                            const col = index % 8;
                                            const isDark = (row + col) % 2 === 1;
                                            const isSelected = selectedPiece && selectedPiece.row === row && selectedPiece.col === col;

                                            return c('button', {
                                                key: index,
                                                onClick: () => handleChessClick(row, col),
                                                className: `w-full h-full text-3xl flex items-center justify-center font-serif transition-colors ${ isDark ? 'bg-amber-800' : 'bg-amber-100' } ${ isSelected ? 'ring-4 ring-yellow-400' : '' }`
                                            }, piece ? PIECES[piece] : '');
                                        })
                                    ),
                                    isGameOver && c('button', {
                                        onClick: resetChessGame,
                                        className: "mt-4 bg-blue-600 text-white font-semibold py-2 px-6 rounded-full shadow-lg hover:bg-blue-700 transition transform hover:scale-105"
                                    }, 'Play Again')
                                );
                            case 'spades':
                                return spadesState.phase === 'bidding' ? renderSpadesBidding() : renderSpadesGame();
                            default:
                                return null;
                        }
                    case 'purpose':
                        return c('div', { className: "text-center p-4" },
                            c('h2', { className: "text-2xl font-bold text-gray-800 mb-4" }, 'Our Purpose'),
                            c('div', { className: "text-gray-700 space-y-4 text-left" },
                                c('p', null, 'Welcome, my name is Denzel but you can just call me DocArt and I care deeply for the youth! As a young man growing up in the inner city of Detroit I was always into drawing, basketball, riding bikes, video games etc etc. However I would see a lot of other youth get into wayward wicked activities that they had no business getting involved with. A lot of it was due to lack of resources and lack of parental leadership. And a lot of the time it was due to poor choices. However I don\'t think it is as bad as it is today.'),
                                c('p', null, 'Currently, the culture for our youth today is pushing them further away from outside, wholesome content and it is encouraging them to identify with dark things just to fit in. I created this site and the content I create to combat the culture because nothing is more good or greater than mine and your Lord and Savior Jesus Christ.'),
                                c('p', null, 'I believe If we put Him in everything we do we cannot fail and we also introduce others to Him. Playing a part in winning souls for His kingdom and taking souls from the opps kingdom.')
                            )
                        );
                    default:
                        return null;
                }
            };
            
            return c('div', { className: "flex flex-col items-center justify-center min-h-screen p-4 font-sans bg-sky-200" },
                renderMessageBox(),
                c('div', { className: "relative bg-white bg-opacity-90 rounded-xl shadow-2xl p-6 md:p-10 w-full max-w-lg mb-4" },
                    c('h1', { className: "text-3xl font-graffiti text-gray-900 text-center mb-6" }, 'DocArtAtlier'),
                    renderContent()
                ),
                c('nav', { className: "relative bg-white rounded-full shadow-xl w-full max-w-sm mt-4 p-2 flex justify-around" },
                    c('button', { onClick: () => { setCurrentPage('home'); setCurrentGame('menu'); }, className: `flex-1 flex flex-col items-center p-2 rounded-full transition-colors ${ currentPage === 'home' ? 'bg-indigo-100 text-indigo-600' : 'text-gray-500 hover:text-indigo-600' }` },
                        c(icons.BookA, { size: 20 }),
                        c('span', { className: "text-xs font-medium mt-1" }, 'Home')
                    ),
                    c('button', { onClick: () => { setCurrentPage('ebooks'); setCurrentGame('menu'); }, className: `flex-1 flex flex-col items-center p-2 rounded-full transition-colors ${ currentPage === 'ebooks' ? 'bg-indigo-100 text-indigo-600' : 'text-gray-500 hover:text-indigo-600' }` },
                        c(icons.Book, { size: 20 }),
                        c('span', { className: "text-xs font-medium mt-1" }, 'Ebooks')
                    ),
                    c('button', { onClick: () => { setCurrentPage('game'); setCurrentGame('menu'); }, className: `flex-1 flex flex-col items-center p-2 rounded-full transition-colors ${ currentPage === 'game' ? 'bg-indigo-100 text-indigo-600' : 'text-gray-500 hover:text-indigo-600' }` },
                        c(icons.Gamepad, { size: 20 }),
                        c('span', { className: "text-xs font-medium mt-1" }, 'Game')
                    ),
                    c('button', { onClick: () => { setCurrentPage('purpose'); setCurrentGame('menu'); }, className: `flex-1 flex flex-col items-center p-2 rounded-full transition-colors ${ currentPage === 'purpose' ? 'bg-indigo-100 text-indigo-600' : 'text-gray-500 hover:text-indigo-600' }` },
                        c(icons.Handshake, { size: 20 }),
                        c('span', { className: "text-xs font-medium mt-1" }, 'Purpose')
                    )
                )
            );
        };
        const container = document.getElementById('root');
        const root = createRoot(container);
        root.render(c(App));
    </script>
</body>
</html>
